{"version":3,"sources":["webpack:///webpack/bootstrap e5bb25fc9fab1cdc7220","webpack:///./js/Constants.js","webpack:///./js/ShapeCreator.js","webpack:///./js/ThroughTheAsteroidsGame.js","webpack:///./js/GameStarter.js","webpack:///./js/Scene3D.js","webpack:///./js/SkyBox.js","webpack:///./js/GameField.js","webpack:///./js/Planet.js","webpack:///./js/Spaceship.js","webpack:///./js/Asteroid.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC3DA;AACA,kCAAkC,cAAc,SAAS,+BAA+B,wDAAwD;AAChJ,6CAA6C,iBAAiB,aAAa,sCAAsC,2CAA2C;AAC5J;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;ACvCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACRA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C;AAC7C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;AC3FuB;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,oBAAoB;AACrE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC/CA;AACoC;;AAEpC;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;AChCA;AACA;AAC0B;;;AAG1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACzBA;AACuB;;AAEvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yDAAyD,aAAa;AACtE;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACdA;AAC0C;;AAE1C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0EAA0E;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACvCA;AACyB;;AAEzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gEAAgE,+GAA2D;AAC3H;AACA;;AAEA;AACA,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;;AAEA;AACA,gCAAgC;AAChC;AACA;AAAA;AAAA","file":"Build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e5bb25fc9fab1cdc7220","\n\nexport const GLSL_MODULES = {\n    sky_vertex: \"varying vec2 vUV; void main() {vUV = uv;vec4 pos = vec4(position, 1.0);gl_Position = projectionMatrix * modelViewMatrix * pos;}\",\n    sky_fragment: \"uniform sampler2D texture;varying vec2 vUV;void main() {vec4 sample = texture2D(texture, vUV);gl_FragColor = vec4(sample.xyz, sample.w);}\"\n};\n\nexport const WINDOW_OPTIONS = {\n    gameWindowHeight: window.innerHeight,\n    gameWindowWidth: window.innerWidth,\n};\n\nexport const GAMEFIELD_OPTIONS = {\n    rotationSpeed: 0.001\n};\n\nexport const PLANET_OPTIONS = {\n    radius: 30,\n    segmentsQuantity: 90\n};\n\nexport const ASTEROID_OPTIONS = {\n    rotationSpeed: 0.01,\n    radius: 0.5,\n    detail: 1,\n    color: 0x5c3322\n};\n\nexport const SKYBOX_OPTIONS = {\n    radius: 600,\n    segmentsQuantity: 200,\n    rotationSpeed: 0.0005\n};\n\nexport const SPACESHIP_OPTIONS = {\n    dimensions: 0.5,\n    color: 0x000000,\n    flyWidthBorder: window.innerWidth*0.002,\n    flyHeightBorder: window.innerHeight*0.002\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/Constants.js\n// module id = 0\n// module chunks = 0","export default class ShapeCreator {\n    constructor(){\n        this.createMesh();\n    }\n\n    createMesh() {\n        throw new Error(\"Not implemented!\");\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/ShapeCreator.js\n// module id = 1\n// module chunks = 0","import GameStarter from \"./GameStarter\";\n\n\nclass ThroughTheAsteroidsGame {\n    constructor() {\n        this.setLoadListener();\n    }\n\n    setLoadListener() {\n        window.addEventListener('load',() => {\n            (new GameStarter()).init();\n        });\n    }\n}\n\nnew ThroughTheAsteroidsGame();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/ThroughTheAsteroidsGame.js\n// module id = 2\n// module chunks = 0","import Scene3D from \"./Scene3D\";\nimport SkyBox from \"./SkyBox\";\nimport GameField from \"./GameField\";\nimport Spaceship from \"./Spaceship\";\nimport Asteroid from \"./Asteroid\";\n\nexport default class GameStarter {\n    constructor() {\n        this.asteroids=[];\n    };\n\n    init() {\n        this.scene3D = new Scene3D();\n\n        let axis = new THREE.AxisHelper(500);//add temporary Axises\n        this.scene3D.scene.add(axis);\n\n        this.skyBox = new SkyBox();\n        this.scene3D.scene.add(this.skyBox.mesh);\n\n        this.gameField = new GameField();\n        this.scene3D.scene.add(this.gameField.mesh);\n\n        this.spaceship = new Spaceship();\n        this.scene3D.scene.add(this.spaceship.mesh);\n\n        this.animateIntro();\n    }\n\n    addAsteroids() {\n        this.asteroidsQuantity=Math.floor(5+Math.random()*8);\n\n        this.asteroidsContainer=new THREE.Object3D();\n\n        for(let i=0;i<this.asteroidsQuantity;i++){\n            this.asteroid = new Asteroid();\n            let xpos=-3.4+Math.random()*(6.8);\n            let ypos=31+Math.random()*(1.5);\n            let zpos=-5.5+Math.random()*(5.5);\n            let rotationSpeed=Math.random()/10;\n\n            this.asteroid.setPosition(xpos,ypos,zpos);\n            this.asteroid.setRotationSpeed(rotationSpeed);\n            this.asteroids.push(this.asteroid);\n\n            this.asteroidsContainer.add(this.asteroid.mesh);\n            //this.gameField.mesh.add(this.asteroid.mesh);\n        }\n\n        this.gameField.mesh.add(this.asteroidsContainer);\n    }\n\n    animateIntro() {\n        if (this.scene3D.camera.position.z > 6) {\n            this.scene3D.camera.position.z--;\n        }\n        if (this.scene3D.camera.position.y > 1) {\n            this.scene3D.camera.position.y--;\n        }\n\n        //DEBUG IT\n        if (this.spaceship.mesh.position.z > 3.6) {\n            this.spaceship.mesh.position.z--;\n        }\n        if (this.spaceship.mesh.position.y > 1) {\n            this.spaceship.mesh.position.y--;\n        }\n\n        this.scene3D.renderer.render(this.scene3D.scene, this.scene3D.camera);\n        this.scene3D.controls.update();\n        this.animationFrameId = requestAnimationFrame(()=>this.animateIntro());\n\n        if (this.scene3D.camera.position.y === 1 && this.scene3D.camera.position.z === 6) {\n            cancelAnimationFrame(this.animationFrameId);\n            document.addEventListener('mousemove', this.spaceship.setMouseMoveListener.bind(this.spaceship), false);\n            this.scene3D.createLights();\n            this.addAsteroids();\n            this.animateGameProcess();\n        }\n    }\n\n    animateGameProcess() {\n        this.gameField.rotate();\n        this.skyBox.rotate();\n        this.asteroids.forEach(function (item) {\n            item.rotate();\n        });\n        this.scene3D.renderer.render(this.scene3D.scene, this.scene3D.camera);\n        this.scene3D.controls.update();\n        requestAnimationFrame(this.animateGameProcess.bind(this));\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/GameStarter.js\n// module id = 3\n// module chunks = 0","import {WINDOW_OPTIONS} from \"./Constants\";\n\nexport default class Scene3D {\n    constructor() {\n        this.canvas = document.getElementById(\"canvas\");\n        this.createScene();\n    }\n\n    createScene() {\n        this.scene = new THREE.Scene();\n        this.createCamera();\n        this.createRenderer();\n        this.createCommonLight();\n        this.createControls();\n    }\n\n    createCamera() {\n        this.camera = new THREE.PerspectiveCamera(60, WINDOW_OPTIONS.gameWindowWidth / WINDOW_OPTIONS.gameWindowHeight, 0.1, 1000);\n        this.camera.position.z = 96;\n        this.camera.position.y = 91;\n        this.scene.add(this.camera);\n    }\n\n    createCommonLight() {\n        this.light = new THREE.AmbientLight();\n        this.scene.add(this.light);\n    }\n\n    createRenderer() {\n        this.renderer = new THREE.WebGLRenderer({canvas: this.canvas});\n        this.renderer.setPixelRatio(7);\n        this.renderer.setClearColor(0x5342f4, 1);\n    }\n\n    createControls() {\n        this.controls = new THREE.TrackballControls(this.camera, this.canvas);\n        this.controls.zoomSpeed = 0.5;\n    }\n\n    createLights() {\n        const pointLight = new THREE.PointLight(0xfff000, 1, 50);\n        pointLight.position.set(0, 25, 1.2);\n        this.scene.add(pointLight);\n\n        const pointLightHelper = new THREE.PointLightHelper(pointLight, 4);\n        this.scene.add(pointLightHelper);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/Scene3D.js\n// module id = 4\n// module chunks = 0","import ShapeCreator from \"./ShapeCreator\";\nimport {GLSL_MODULES,SKYBOX_OPTIONS} from \"./Constants\";\n\nexport default class SkyBox extends ShapeCreator  {\n\n    constructor() {\n        super();\n    }\n\n    createMesh() {\n        const uniforms = {\n            texture: { type: 't', value: new THREE.TextureLoader().load(\"src/images/hubble-min.jpg\")}\n        };\n\n        const material = new THREE.ShaderMaterial( {\n            uniforms:       uniforms,\n            vertexShader:  GLSL_MODULES.sky_vertex,\n            fragmentShader: GLSL_MODULES.sky_fragment\n        });\n\n        const geometry = new THREE.SphereGeometry(SKYBOX_OPTIONS.radius,SKYBOX_OPTIONS.segmentsQuantity,SKYBOX_OPTIONS.segmentsQuantity);\n        this.mesh = new THREE.Mesh( geometry, material );\n        this.mesh.scale.set(-1, 1, 1);\n        //this.skyBox.eulerOrder = 'XZY';\n        //this.skyBox.renderDepth = 1000.0;\n    }\n\n    setPosition() {}\n\n    rotate() {\n        this.mesh.rotation.x+=SKYBOX_OPTIONS.rotationSpeed;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/SkyBox.js\n// module id = 5\n// module chunks = 0","import ShapeCreator from \"./ShapeCreator\";\nimport Planet from \"./Planet\";\nimport {GAMEFIELD_OPTIONS} from \"./Constants\";\n\n\nexport default class GameField extends ShapeCreator {\n\n    constructor() {\n        super();\n    }\n\n    createMesh() {\n        this.mesh=new THREE.Object3D();\n        this.planet=new Planet();\n        this.mesh.add(this.planet.mesh);\n        this.setPosition();\n    }\n\n    setPosition() {\n        this.mesh.position.y=-30.5;\n    }\n\n    rotate() {\n        this.mesh.rotation.x += GAMEFIELD_OPTIONS.rotationSpeed;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/GameField.js\n// module id = 6\n// module chunks = 0","import ShapeCreator from \"./ShapeCreator\";\nimport {PLANET_OPTIONS} from \"./Constants\";\n\nexport default class Planet extends ShapeCreator {\n    constructor() {\n        super();\n    }\n\n    createMesh() {\n        const texture = new THREE.TextureLoader().load( \"src/images/LL.jpg\" );\n        const geometry = new THREE.SphereGeometry(PLANET_OPTIONS.radius,PLANET_OPTIONS.segmentsQuantity,PLANET_OPTIONS.segmentsQuantity);\n        const material = new THREE.MeshStandardMaterial({map: texture});\n        this.mesh = new THREE.Mesh( geometry, material );\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/Planet.js\n// module id = 7\n// module chunks = 0","import ShapeCreator from \"./ShapeCreator\";\nimport {SPACESHIP_OPTIONS, WINDOW_OPTIONS} from \"./Constants\";\n\nexport default class Spaceship extends ShapeCreator {\n\n    constructor() {\n        super();\n    }\n\n    createMesh() {\n        this.mesh=new THREE.Object3D();\n        this.plane = new THREE.ObjectLoader();\n        this.plane.load( 'src/JSON_Models/spaceship.json', ( obj ) => {\n            this.mesh.add(obj);\n        });\n        this.setPosition();\n    }\n\n    setPosition() {\n        this.mesh.position.z = 92.6;\n        this.mesh.position.y=88.3;\n    }\n\n    setMouseMoveListener(event) {\n        let tx = -1 + (event.clientX / WINDOW_OPTIONS.gameWindowWidth)*2;\n        let ty = 1 - (event.clientY / WINDOW_OPTIONS.gameWindowHeight)*2;\n\n        this.mesh.position.x=this.normalizePosition(tx, -1, 1, -SPACESHIP_OPTIONS.flyWidthBorder, SPACESHIP_OPTIONS.flyWidthBorder);\n        this.mesh.position.y=this.normalizePosition(ty, -1, 1, -0.5, 1.5);//-SPACESHIP_OPTIONS.flyHeightBorder+1,SPACESHIP_OPTIONS.flyHeightBorder+0.5);\n    }\n\n    normalizePosition(v,vmin,vmax,tmin,tmax) {\n        let nv = Math.max(Math.min(v,vmax), vmin);\n        let dv = vmax-vmin;\n        let pc = (nv-vmin)/dv;\n        let dt = tmax-tmin;\n        let tv = tmin + (pc*dt);\n        return tv;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/Spaceship.js\n// module id = 8\n// module chunks = 0","import ShapeCreator from \"./ShapeCreator\";\nimport {ASTEROID_OPTIONS} from \"./Constants\";\n\nexport default class Asteroid extends ShapeCreator {\n\n    constructor() {\n        super();\n    }\n\n    createMesh() {\n        const sphereGeometry = new THREE.DodecahedronGeometry( ASTEROID_OPTIONS.radius, ASTEROID_OPTIONS.detail);\n        const sphereMaterial = new THREE.MeshStandardMaterial( { color: ASTEROID_OPTIONS.color ,shading: THREE.FlatShading} );\n        this.mesh = new THREE.Mesh( sphereGeometry, sphereMaterial );\n    }\n\n    setPosition(x,y,z) {\n        this.mesh.position.x=x;//2\n        this.mesh.position.y=y;//31\n        this.mesh.position.z=z;//2\n    }\n\n    setRotationSpeed(rotationSpeed) {\n        this.rotationSpeed=rotationSpeed;\n    }\n\n    rotate() {\n        this.mesh.rotation.z+=this.rotationSpeed;//ASTEROID_OPTIONS.rotationSpeed;\n    }\n\n    step(z) {\n        this.mesh.position.z+=z;//2\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/Asteroid.js\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}